<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
</head>

<body>
  <div></div>
</body>

<script>
const heapSort = (nums) => {
    let len;

    const swap = (x, y) => {
        [nums[x], nums[y]] = [nums[y], nums[x]]
    }

    const heapify = (i) => {
        const left = i * 2 + 1;
        const right = i * 2 + 2;
        let largest = i;

        if (left < len && nums[left] > nums[largest]) {
            largest = left;
        }

        if (right < len && nums[right] > nums[largest]) {
            largest = right;
        }

        if (largest !== i) {
            swap(largest, i);
            heapify(largest);
        }
    }

    // 第一步, 构建大顶堆
    len = nums.length;
    for (let i = Math.floor(len / 2); i >= 0; i--) {
        heapify(i);
    }

    // 第二步, 交换堆顶元素与末尾元素, 调整堆结构
    for (let i = nums.length - 1; i > 0; i--) {
        swap(i, 0);
        len--;
        heapify(0);
    }

    return nums;
}

console.log(heapSort([10,1,2,9,3,5,6,7,4,8]));
</script>
</html>